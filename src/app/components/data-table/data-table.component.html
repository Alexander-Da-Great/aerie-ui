<table [dataSource]="data" class="w-100 mat-elevation-z1" mat-table>
  <ng-container [matColumnDef]="column" *ngFor="let column of columns">
    <th mat-header-cell *matHeaderCellDef>{{ column }}</th>
    <td mat-cell *matCellDef="let element">
      <mat-checkbox
        *ngIf="column === 'select'"
        matTooltip="Select Element"
        [checked]="selection.isSelected(element)"
        (click)="$event.stopPropagation()"
        (change)="onSelectElement(element)"
      ></mat-checkbox>
      {{ element[column] }}
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: columnsToDisplay"
    (click)="onSelectElement(row)"
    (contextmenu)="onContextMenu($event, contextMenuTrigger, row)"
  ></tr>
</table>

<div #contextMenuTrigger="matMenuTrigger" [matMenuTriggerFor]="contextMenu">
  <mat-menu #contextMenu="matMenu">
    <ng-template matMenuContent let-data="data">
      <button mat-menu-item (click)="deleteElement.emit(data.id)">
        <mat-icon>delete_forever</mat-icon>
        <span>Delete</span>
      </button>
    </ng-template>
  </mat-menu>
</div>
